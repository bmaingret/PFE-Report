%
% CITI Research Report Template
%
% 07/2012: Paul Ferrand - Initial Template
% 02/2013: Frederic Le Mouel - Refactoring
% 

\documentclass[a4paper]{article}

%
% Packages
%

\usepackage[utf8]{inputenc}% ou \usepackage[latin1]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{graphicx}
\usepackage{listings}
\usepackage[bookmarks]{hyperref}

\lstset{columns=fullflexible,basicstyle=\ttfamily}

\begin{document}

%
% Cover Page
%

\pagestyle{empty}
\begin{center}
\begin{figure}%
\centering
%\includegraphics[width=0.5\columnwidth]{logo/citi-old-bw.eps}% old logo
%\includegraphics[width=0.4\columnwidth]{logo/citi-new-bw.eps}% new logo 
\includegraphics[width=0.4\columnwidth]{logo/citi-new-title-bw.eps}% old logo - titled
\end{figure}
%{\LARGE \textsc{Communication scientifique}} \\ % in French
{\LARGE \textsc{Scientific Communication}} \\ % in English
\vspace{0.5cm}
%{Centre d'Innovation en Télécommunications et Intégration de Services} \\ % in French
{Center of Innovation in Telecommunications and Integration of Services} \\ % in English
\vspace{2cm}
{\Large \textbf{ConGolo: A Context-oriented language based on Golo}} \\
\vspace{10pt}
{\large \textit{Baptiste Maingret}} \\
\vspace{10pt}
{\large April 2014} \\
\vspace{20pt}
\begin{minipage}{0.8\columnwidth}
\sffamily
\small
INCLUDE ABSTRACT HERE
\end{minipage}
\end{center}
\vfill
\begin{minipage}[b]{0.3\columnwidth}
\includegraphics[width=\columnwidth]{logo/inria.eps}%
\end{minipage}
\hfill
\begin{minipage}{0.3\columnwidth}
\small
\centering
\textbf{
%University of Lyon \\ % in English
INSA Lyon \\ % in English
Shanghai Jiao Tong University
}
\end{minipage}
\hfill
\begin{minipage}[b]{0.25\columnwidth}
\includegraphics[width=\columnwidth]{logo/insa-noir.eps}%
\end{minipage}

\newpage

%
% Title page
%

\title{Research Report}

\author{Baptiste Maingret\\[10pt]
INSA-Lyon, F-69621, Villeurbanne, France\\
\texttt{baptiste.maingret@insa-lyon.fr}}

\date{\today}
\newcommand{\Keywords}[1]{\par\noindent 
{\small{\em Keywords\/}: Context-Oriented Programming, Golo, Java, System reasoning, Dynamic Language}}
\maketitle

\begin{abstract} 
Insert abstract here
\Keywords{Context-Oriented Programming, Golo, Java, System reasoning, Dynamic Language}
\end{abstract}

\newpage

%
% Report Body
%

\section{Introduction}

Another current trends where COP could be of great help is the Internet of Things where the systems architecture, the environment, hardware, sensors and so on can greatly vary from one moment to another.

Context-oriented programming (COP) has drawn research interest in the past years. Several new COP languages have emerged. Most of these approaches allow for multiple contexts definition and their activations. They also allow the developer to specify context-dependent behaviours. We will see that many of them use an approach based on AspectJ and that another popular approach is based on events.

Even if there are still some issues to address, none of the current work seems to focus on the decision-making systems backing up these COP languages. Whereas it is to decide what context should be activates or what actions should be done based on the current context, current systems only allow for one implementation and does not provide any sort of abstraction.



In this paper, we propose a new COP language ConGolo, extending the Golo language, that will allow abstracting the reasoning mechanisms whether it is a simple event-condition-action (ECA), a automate, a neural network or yet another approach.

++ evaluation

In section \ref{section:stateoftheart} we will first see the different approaches taken by existing COP languages to explain the choices made in ConGolo. In \ref{section:contribution} we will present Congolo and the abstraction mechanism for decision-making and reasoning systems. In \ref{section:implementation} we will describe the implementation and discuss the choices made.


++what is golo \cite{ponge_golo_2013}
lightweight jvm language
dynamic
invokedynamic



\section{State of the Art}
\label{section:stateoftheart}

\subsection{Context-Oriented Programming}


There are already many COP languages based on a variety of languages. Most of them implements the context with the use of layers. In order to compare these languages we can thus focus at first on the way the layer are handled, i.e. their declaration and activation \cite{appeltauer_comparison_2009}.

Two strategies are often found: layer-in-class and class-in-layer implementation. The first is used in \cite{appeltauer_declarative_2012} \cite{appeltauer_dedicated_2008} \cite{appeltauer_improving_2009} \cite{kamina_eventcj:_2011} \cite{nunez_declarative_2009}. The later is found in \cite{lincke_open_2011}. Some languages as ContextL provide both models and \cite{ghezzi_context_2010} which focuses on distributed COP asserts that the best solution for layer declaration is an hybrid technique between layer-in-class and class-in-layer models. 

The activation of layers often use the keyword \lstinline|with| \cite{haupt_contextj:_2011} \cite{appeltauer_declarative_2013} \cite{kamina_eventcj:_2011}. Instead \cite{nunez_declarative_2009} or \cite{ghezzi_context_2010} use a different approach where contexts are activated independently of the running program by the mean of events, but offer a method to find out whether they are active or not. As pointed out by \cite{nunez_declarative_2009}, context-dependent behaviours may occurs in two distinct manners in event-based COP languages. First, the reaction to events may depend on the current context. Second, context changes can be seen as event and thus be reacted to. 

In the end, it appears that there are several mechanisms both for the context declarations and for their activations. Each of them have their pros and cons as well as specificities. \cite{kamina_unified_2013} proposes a new unified approach where they attempt to include the different approaches taken by previous researches in their own language Javanese.

Their exist different type of implementation for COP languages. The easiest one might be to develop an API such as \cite{appeltauer_dedicated_2008}. One can also extends existing languages with new keywords such as in \cite{clarke_semantics_2009} \cite{ghezzi_context_2010}. Finally some papers propose a new COP language as ContextJ \cite{haupt_contextj:_2011}, JCOP\cite{appeltauer_declarative_2013}, EventCJ \cite{kamina_eventcj:_2011} or NextEJ \cite{kamina_towards_2009}.

Regarding the decision making system, systems based on events allow for a better flexibility in the approach taken as in \cite{kamina_eventcj:_2011} \cite{kamina_towards_2009}. Most of the other solutions implement a mechanism similar to Event-Condition-Action systems. Some of them use some specific algorithms \cite{jayaram_context-oriented_2009} or approaches such as Petri networks \cite{cardozo_uniting_2012}.

Evaluation of COP languages and approaches are usually based on the runtime overhead or the ease of programming. The first implementation of ContextJ \cite{haupt_contextj:_2011} shown a significant overhead when using layers. In \cite{appeltauer_layered_2010} the authors explores the use of the new INVOKEDYNAMIC (ID) instruction introduced in Java 7 which allows for dynamic method dispatch to implement the layer method dispatch in JCOP \cite{appeltauer_declarative_2013}. The performances shown are encouraging especially since at the time of writing the implementation of in the JVM was not yet over. Thus the Golo language, based on ID form day one, could be a good applicant for COP languages. Regarding the other approach of evaluation which would be the ease of programming, including code duplication and code overhead, \cite{appeltauer_declarative_2013} compare JCOP to the previous ContextJ and notice a significant reduction of code due to layer inheritance mechanism and context classes to better compose layers.

 
\section{Contribution}
\label{section:contribution}

In this paper we propose a new COP language, namely ConGolo, based on Golo language. We offer basic COP solutions based on previous paper and existing solutions and introduced a new way to abstract the decision making process.

Develop COP

Develop 


\section{Implementation}
\label{section:implementation}

\section{Results}
\label{section:results}

Perfomance evaluation
10 methods layered and plain implementation as in \cite{appeltauer_comparison_2009} where multiple languages were tested to create a benchmark, similar to \cite{kamina_eventcj:_2011}.

\section{Conclusion \& Perspectives}
\label{section:conclusion}


%
% Bibliography
%

\bibliographystyle{plain}
\bibliography{bmaingret_PFE_2014_Report}


\end{document}

